
Safari on iOS requires explicit user permission to access motion and orientation data for privacy reasons. This behavior was introduced in iOS 13. To handle this, you must request permission from the user before using the DeviceOrientationEvent.

Hereâ€™s how you can modify the example to work on Safari Mobile:

Updated Code for Safari Compatibility
html
Copy code
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gyroscope Interaction</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f0f0f0;
      overflow: hidden;
    }
    #square {
      width: 100px;
      height: 100px;
      background-color: #3498db;
      border-radius: 10px;
      transition: transform 0.1s ease-out;
    }
    #permission-button {
      position: absolute;
      bottom: 20px;
      padding: 10px 20px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    #permission-button.hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div id="square"></div>
  <button id="permission-button">Enable Motion</button>
  <script>
    const square = document.getElementById('square');
    const permissionButton = document.getElementById('permission-button');

    // Function to handle device orientation
    function handleOrientation(event) {
      const tiltX = event.beta; // Front-back tilt
      const tiltY = event.gamma; // Left-right tilt

      const xOffset = Math.min(Math.max(tiltY, -45), 45) * 2; // Limit to [-45, 45]
      const yOffset = Math.min(Math.max(tiltX, -45), 45) * 2;

      square.style.transform = `translate(${xOffset}px, ${yOffset}px)`;
    }

    // Function to request permission for iOS
    function requestPermission() {
      if (
        typeof DeviceMotionEvent !== 'undefined' &&
        typeof DeviceMotionEvent.requestPermission === 'function'
      ) {
        DeviceMotionEvent.requestPermission()
          .then((response) => {
            if (response === 'granted') {
              window.addEventListener('deviceorientation', handleOrientation);
              permissionButton.classList.add('hidden');
            } else {
              alert('Permission denied for motion data.');
            }
          })
          .catch((error) => {
            console.error('Permission request failed:', error);
          });
      } else {
        // Non-iOS devices don't require this step
        window.addEventListener('deviceorientation', handleOrientation);
        permissionButton.classList.add('hidden');
      }
    }

    // Attach event listener to the button
    permissionButton.addEventListener('click', requestPermission);

    // Automatically add listener for non-iOS devices
    if (
      typeof DeviceMotionEvent === 'undefined' ||
      typeof DeviceMotionEvent.requestPermission !== 'function'
    ) {
      window.addEventListener('deviceorientation', handleOrientation);
      permissionButton.classList.add('hidden');
    }
  </script>
</body>
</html>
